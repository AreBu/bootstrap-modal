<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{{title}}</title>
    <meta charset="utf-8">
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet">

    <link href="css/bootstrap-modal.css" rel="stylesheet" -->
    <style>
      input:checked + label.btn {
          /* This is an actual copy/paste of the .btn-primary:active style */
        color: #ffffff;
        text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
        background-color: #006dcc;
        *background-color: #0044cc;
        background-image: -moz-linear-gradient(top, #0088cc, #0044cc);
        background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0044cc));
        background-image: -webkit-linear-gradient(top, #0088cc, #0044cc);
        background-image: -o-linear-gradient(top, #0088cc, #0044cc);
        background-image: linear-gradient(to bottom, #0088cc, #0044cc);
        background-repeat: repeat-x;
        border-color: #0044cc #0044cc #002a80;
        border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc', endColorstr='#ff0044cc', GradientType=0);
        filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);

        color: #ffffff;
        background-color: #0044cc;        
        background-color: #003399 \9;
 
      }    
    </style>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  </head>

  <body>
    <div class="container-fluid">
      <div class="row-fluid">
        <form>
        <div class="repform modal modal-reposition modal-fit" tabindex=-1>
            <div class="modal-header">
              <h3>Modal Test Form</h3>
            </div>
            <div class="modal-body">
              <div class="row-fluid form-horizontal">
                <div>
                    <input class="repfld" name="atdate">
                    <input class="repfld" name="invtype">
                    <input class="repfld" name="invno">
                    <input class="repfld" name="grplev">
                    <input class="repfld" name="ordlev">
                </div>
                <div class="fieldset-collapse" name="filters">
                    <input class="repfld repfld-filter" name="date">
                    <input class="repfld repfld-filter" name="cusname">
                    <input class="repfld repfld-filter" name="salename">
                    <input class="repfld repfld-filter" name="paidflag">
                    <input class="repfld repfld-filter" name="postflag">
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <div class="row-fluid form-horizontal">
                <select class="input-small">
                  <option value="pdf">pdf</option>
                  <option value="prn">prn</option>
                  <option value="csv">csv</option>
                </select>
                <button type="submit" class="btn btn-primary">get report</button>
              </div>
            </div>
        </div> <!-- /modal -->
        </form>
      </div>
    </div> <!-- /container -->
    <!-- javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap.js"></script>
    <script src="js/bootstrap-modalmanager.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script>
    // -- global function ---
      function repfld(container,labels){
          $('.repfld',container).each(function(){
              var name  = this.name
                , label = labels[name] || name
                , $this = $(this)
                , $grp  = $('<div class="control-group">')
                , $wrap, $label

              if (typeof label == 'function')
                label = label(this) || name

              $label = $('<label class="control-label">').html(label)

              if ($this.hasClass('repfld-filter')){
                var namecb = name +'_cb'
                
                $wrap = $('<div class="collapse" id="'+namecb+'">')
                $grp.addClass("info")
                
                $label
                  .css('padding-top','0')
                  .html(
                    $('<label class="btn" for="'+namecb+'" data-toggle="collapse" data-target="#'+namecb+'">')
                      .html(label)
                      .before(
                          $('<input type="checkbox" style="display:none" name="'+namecb+'">')
                        ))
                        
                //$this.addClass('hidden')
              }
              
              if (label && !$this.attr('placeholder')) 
                $this.attr('placeholder',label)

              if (!$this.attr('type'))
                this.type = 'text'
              
              $this
                .removeClass('repfld')
                .wrap($grp)
                .before($label)
                .wrap($('<div class="controls">'))
          
              if ($wrap)
                $this.wrap($wrap)
          })
          var cid,cnt   = 0
          $('.fieldset-collapse',container).each(function(){
            var cbname = ''
            if (this.name)
              cbname = 'name="'+this.name+'_cb" '
              
            cnt += 1
            cid = this.id || ('collapse'+cnt)
            $(this)
              .wrapInner($('<div id="fieldset-'+cid+'" class="collapse">'))
              .prepend(
                  '<div class="control-group">'
                +   '<div class="control-label">'
                +     '<input type="checkbox" class="modal-sizechanged" id="btn-'+cid+'" '+cbname+' style="display:none">'
                +     '<label class="btn" for="btn-'+cid+'" data-toggle="collapse" data-target="#fieldset-'+cid+'">more options </label>'
                +   '</div>'
                + '</div>'
                )
          })
      }
    </script>
  </body>
  <script>
    $(function(){
        // ---- r_inv fld definition ----
        var labels = {
            atdate  : function(inp){
                        $(inp)
                          .addClass('input-small')
                      }
          , invtype : function(inp){
                        $(inp)
                          .addClass('input-medium')
                      }
          , invno   : function(inp){
                        $(inp)
                          .addClass('input-medium')
                      }
          , grplev  : function(inp){
                        $(inp)
                          .addClass('input-small')
                      }
          , ordlev  : function(inp){
                        $(inp)
                          .addClass('input-small')
                      }
          , date  : function(inp){
                        $(inp)
                          .addClass('input-medium')
                      }
          , cusname : function(inp){
                        $(inp)
                          .addClass('input-large')
                     }
          , salename: function(inp){
                        $(inp)
                          .addClass('input-large')
                     }
          , paidflag: function(inp){
                        $(inp)
                          .addClass('input-small')
                     }
          , postflag: function(inp){
                        $(inp)
                          .addClass('input-small')
                     }
          }
        repfld($(".repform"),labels)
        $(".repform")
          .modal({
              backdrop  :'static'
            , keyboard  :false
            })
          
    })
  </script>

  </html>
